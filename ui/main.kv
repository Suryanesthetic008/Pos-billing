#:include components.kv

<POSManager>:
    MainMenu:
    Dashboard:
    Billing:
    Services:
    Payments:
    Customers:
    Ledger:
    Expenses:
    Reports:
    Counters:
    Tools:
    Settings:

<MainMenu>:
    name: "menu"
    BoxLayout:
        orientation: "vertical"
        spacing: 12
        padding: 15

        Label:
            text: "LAKSHMI KRISHNA NET CENTRE POS"
            font_size: 26

        PrimaryButton:
            text: "Dashboard"
            on_release: app.root.current = "dashboard"
        PrimaryButton:
            text: "Billing"
            on_release: app.root.current = "billing"
        PrimaryButton:
            text: "Services"
            on_release: app.root.current = "services"
        PrimaryButton:
            text: "Payment Methods"
            on_release: app.root.current = "payments"
        PrimaryButton:
            text: "Customers"
            on_release: app.root.current = "customers"
        PrimaryButton:
            text: "Expenses"
            on_release: app.root.current = "expenses"
        PrimaryButton:
            text: "Reports"
            on_release: app.root.current = "reports"
        PrimaryButton:
            text: "Counters"
            on_release: app.root.current = "counters"
        PrimaryButton:
            text: "Tools"
            on_release: app.root.current = "tools"
        PrimaryButton:
            text: "Settings"
            on_release: app.root.current = "settings"


########################################
# DASHBOARD SCREEN
########################################
<Dashboard>:
    name: "dashboard"
    BoxLayout:
        orientation: "vertical"
        padding: 10
        spacing: 10

        Label:
            text: "Dashboard"
            font_size: 30

        BoxLayout:
            spacing: 10
            size_hint_y: 0.2

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Sales Today"
                Label:
                    id: sales_today
                    text: "₹0"
                    font_size: 24

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Bills Today"
                Label:
                    id: bills_today
                    text: "0"
                    font_size: 24

            BoxLayout:
                orientation: "vertical"
                Label:
                    text: "Top Service"
                Label:
                    id: top_service
                    text: "-"
                    font_size: 24

        BoxLayout:
            id: graph_area
            size_hint_y: 0.7

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "menu"


########################################
# BILLING SCREEN
########################################
<Billing>:
    name: "billing"
    BoxLayout:
        orientation: "vertical"
        padding: 10
        spacing: 10

        Label:
            text: "Billing"
            font_size: 30

        BoxLayout:
            size_hint_y: None
            height: 40
            Label:
                text: "Bill No:"
                size_hint_x: 0.3
            Label:
                id: bill_no
                text: "LKNC-00001"

        Spinner:
            id: service_spinner
            text: "Select Service"
            height: 45
            size_hint_y: None

        BoxLayout:
            spacing: 8
            size_hint_y: None
            height: 40

            TextInput:
                id: qty
                hint_text: "Qty"
                input_filter: "float"

            TextInput:
                id: discount
                hint_text: "Discount"
                input_filter: "float"

        PrimaryButton:
            text: "Add to Bill"
            on_release: root.add_to_bill()

        ScrollView:
            GridLayout:
                id: bill_table
                cols: 1
                size_hint_y: None
                height: self.minimum_height

        BoxLayout:
            spacing: 10
            Label:
                text: "Total:"
                font_size: 26
            Label:
                id: total
                text: "₹0"
                font_size: 26

        TextInput:
            id: customer_name
            hint_text: "Customer Name (optional)"

        Spinner:
            id: payment_spinner
            text: "Select Payment Method"
            height: 40
            size_hint_y: None

        PrimaryButton:
            text: "Save Bill"
            on_release: root.save_bill()

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "menu"


########################################
# SERVICES SCREEN
########################################
<Services>:
    name: "services"
    BoxLayout:
        orientation: "vertical"
        padding: 10
        spacing: 10

        Label:
            text: "Service Manager"
            font_size: 28

        TextInput:
            id: category
            hint_text: "Category (Print, Xerox, Scan)"
        TextInput:
            id: name
            hint_text: "Service Name"
        TextInput:
            id: unit
            hint_text: "Unit (per page / per hour)"
        TextInput:
            id: price
            hint_text: "Price (₹)"
            input_filter: "float"

        BoxLayout:
            spacing: 10
            PrimaryButton:
                text: "Add"
                on_release: root.add_service()
            PrimaryButton:
                text: "Update"
                on_release: root.update_service()
            PrimaryButton:
                text: "Delete"
                on_release: root.delete_service()

        Label:
            text: "Existing Services"
            font_size: 22

        ScrollView:
            GridLayout:
                id: service_list
                cols: 1
                size_hint_y: None
                height: self.minimum_height

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "menu"


########################################
# PAYMENT METHODS SCREEN
########################################
<Payments>:
    name: "payments"
    BoxLayout:
        orientation: "vertical"
        padding: 10
        spacing: 10

        Label:
            text: "Payment Methods"
            font_size: 28

        TextInput:
            id: pay_input
            hint_text: "Add Payment Method (Cash, UPI, etc.)"

        PrimaryButton:
            text: "Add"
            on_release: root.add_method()

        Label:
            text: "Available Methods"
            font_size: 22

        ScrollView:
            GridLayout:
                id: pay_list
                cols: 1
                size_hint_y: None
                height: self.minimum_height

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "menu"


########################################
# CUSTOMERS (Udhaar) SCREEN
########################################
<Customers>:
    name: "customers"
    BoxLayout:
        orientation: "vertical"
        padding: 10
        spacing: 10

        Label:
            text: "Customers / Udhaar"
            font_size: 28

        TextInput:
            id: name
            hint_text: "Customer Name"

        TextInput:
            id: phone
            hint_text: "Phone Number"

        PrimaryButton:
            text: "Add Customer"
            on_release: root.add_customer()

        Label:
            text: "Customer List"
            font_size: 22

        ScrollView:
            GridLayout:
                id: customer_list
                cols: 1
                height: self.minimum_height
                size_hint_y: None

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "menu"


########################################
# LEDGER SCREEN
########################################
<Ledger>:
    name: "ledger"
    BoxLayout:
        orientation: "vertical"
        padding: 10

        Label:
            id: ledger_title
            text: "Ledger"
            font_size: 28

        TextInput:
            id: amount
            hint_text: "Amount (₹)"
            input_filter: "float"

        TextInput:
            id: notes
            hint_text: "Notes"

        BoxLayout:
            spacing: 10
            PrimaryButton:
                text: "Given"
                on_release: root.add_transaction("given")
            PrimaryButton:
                text: "Paid"
                on_release: root.add_transaction("paid")

        Label:
            text: "Transactions"
            font_size: 22

        ScrollView:
            GridLayout:
                id: ledger_list
                cols: 1
                size_hint_y: None
                height: self.minimum_height

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "customers"


########################################
# EXPENSES SCREEN
########################################
<Expenses>:
    name: "expenses"
    BoxLayout:
        orientation: "vertical"
        padding: 10

        Label:
            text: "Expenses"
            font_size: 28

        TextInput:
            id: date
            hint_text: "Date (YYYY-MM-DD)"

        TextInput:
            id: category
            hint_text: "Category (Internet, Ink, Rent, etc.)"

        TextInput:
            id: amount
            hint_text: "Amount (₹)"
            input_filter: "float"

        TextInput:
            id: notes
            hint_text: "Notes"

        PrimaryButton:
            text: "Add Expense"
            on_release: root.add_expense()

        Label:
            text: "Expense History"
            font_size: 22

        ScrollView:
            GridLayout:
                id: expense_list
                cols: 1
                size_hint_y: None
                height: self.minimum_height

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "menu"


########################################
# REPORTS SCREEN
########################################
<Reports>:
    name: "reports"
    BoxLayout:
        orientation: "vertical"
        padding: 10
        spacing: 5

        Label:
            text: "Reports"
            font_size: 28

        BoxLayout:
            spacing: 5
            TextInput:
                id: from_date
                hint_text: "From Date (YYYY-MM-DD)"
            TextInput:
                id: to_date
                hint_text: "To Date (YYYY-MM-DD)"

        Spinner:
            id: report_type
            text: "Daily"
            values: ["Daily", "Monthly", "Custom", "Payment-wise", "Service-wise"]
            height: 40
            size_hint_y: None

        PrimaryButton:
            text: "Generate Report"
            on_release: root.generate_report()

        ScrollView:
            GridLayout:
                id: report_list
                cols: 1
                size_hint_y: None
                height: self.minimum_height

        BoxLayout:
            spacing: 5
            PrimaryButton:
                text: "PDF"
                on_release: root.export_pdf()
            PrimaryButton:
                text: "Word"
                on_release: root.export_word()
            PrimaryButton:
                text: "CSV"
                on_release: root.export_excel()

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "menu"


########################################
# COUNTERS SCREEN
########################################
<Counters>:
    name: "counters"
    BoxLayout:
        orientation: "vertical"
        padding: 10

        Label:
            text: "Counters"
            font_size: 28

        TextInput:
            id: print_pages
            hint_text: "Print Pages Today"
        TextInput:
            id: xerox_pages
            hint_text: "Xerox Pages Today"
        TextInput:
            id: scans
            hint_text: "Scans Today"

        PrimaryButton:
            text: "Save Counters"
            on_release: root.save_counters()

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "menu"


########################################
# TOOLS SCREEN
########################################
<Tools>:
    name: "tools"
    BoxLayout:
        orientation: "vertical"
        padding: 10

        Label:
            text: "Tools"
            font_size: 28

        PrimaryButton:
            text: "Backup Database"
            on_release: root.backup()

        PrimaryButton:
            text: "Restore Backup"
            on_release: root.restore()

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "menu"


########################################
# SETTINGS SCREEN
########################################
<Settings>:
    name: "settings"
    BoxLayout:
        orientation: "vertical"
        padding: 10

        Label:
            text: "Settings"
            font_size: 28

        TextInput:
            id: shop_name
            hint_text: "Shop Name"

        TextInput:
            id: owner_name
            hint_text: "Owner Name"

        TextInput:
            id: address
            hint_text: "Shop Address"

        TextInput:
            id: phone
            hint_text: "Phone Number"

        PrimaryButton:
            text: "Upload Logo"
            on_release: root.choose_logo()

        Spinner:
            id: theme_spinner
            text: "light"
            values: ["light", "dark", "blue"]

        PrimaryButton:
            text: "Save Settings"
            on_release: root.save_settings()

        SecondaryButton:
            text: "Back"
            on_release: app.root.current = "menu"
